{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import'../css/style.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Mypost(){const navigate=useNavigate();const[post,setpost]=useState([]);useEffect(()=>{const onHandle=async()=>{try{const response=await axios.get('/api/v1/post/');setpost(response.data.data);}catch(error){console.log(error);}};onHandle();},[]);const handleDelete=async postId=>{try{const response=await axios.delete(`/api/v1/post/${postId}`,{headers:{'Authorization':`Bearer ${localStorage.getItem('token')}`// If using JWT\n}});// Check if the response was successful\nif(response.status===200){setpost(post.filter(p=>p._id!==postId));// Update the post state\nalert(response.data.message);// Optionally alert the user\n}else{throw new Error('Failed to delete the post');}}catch(error){console.error(error);alert(error.message);// Handle the error\n}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:post&&Array.isArray(post)&&post.length>0?post.map(data=>/*#__PURE__*/_jsx(\"div\",{className:\"tt\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"image-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://pixabay.com/static/frontend/3c346409d336d5f09a7f.svg\",alt:\"img\",className:\"image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Title: \",data.title]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Excerpt: \",data.excerpt]}),/*#__PURE__*/_jsxs(\"p\",{className:\"content-text\",children:[\"Content: \",data.content]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"By Author: \",data.author.Name,\" on \",new Date(data.date).toLocaleDateString()]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(data._id),className:\"content-text\",children:\"Delete This Post\"})]})]})},data._id)):/*#__PURE__*/_jsx(\"h1\",{children:\"No Post Available\"})}),/*#__PURE__*/_jsx(\"br\",{}),\"      \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"g\",onClick:()=>navigate('/api/v1/users/home'),children:\"Home\"})]});}export{Mypost};","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Mypost","navigate","post","setpost","onHandle","response","get","data","error","console","log","handleDelete","postId","delete","headers","localStorage","getItem","status","filter","p","_id","alert","message","Error","children","Array","isArray","length","map","className","src","alt","title","excerpt","content","author","Name","Date","date","toLocaleDateString","onClick"],"sources":["/home/akshat/Documents/coding items/Blog/frontend/src/controllers/Mypost.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport {useNavigate} from 'react-router-dom'\nimport '../css/style.css'\nfunction Mypost(){\n    const navigate=useNavigate()\n\n    const [post,setpost]=useState([])\n    useEffect(()=>{\n        const onHandle=async()=>{\n            try {\n                const response=await axios.get('/api/v1/post/')\n                setpost(response.data.data)\n                \n            } catch (error) {\n                console.log(error);\n                \n            }\n        }\n        onHandle()\n    },[])\n        const handleDelete = async (postId) => {\n          try {\n              const response = await axios.delete(`/api/v1/post/${postId}`, {\n                  headers: {\n                      'Authorization': `Bearer ${localStorage.getItem('token')}`, // If using JWT\n                  },\n              });\n  \n              // Check if the response was successful\n              if (response.status === 200) {\n                  setpost(post.filter((p) => p._id !== postId)); // Update the post state\n                  alert(response.data.message); // Optionally alert the user\n              } else {\n                  throw new Error('Failed to delete the post');\n              }\n          } catch (error) {\n              console.error(error);\n              alert(error.message); // Handle the error\n          }}\n    return (\n        <>\n        <div >\n            { post &&Array.isArray(post) &&post.length>0?(\n                post.map((data)=>(\n                    <div className='tt' key={data._id}>\n      <div className=\"image-container\">\n        <img src=\"https://pixabay.com/static/frontend/3c346409d336d5f09a7f.svg\"alt='img' className=\"image\" />\n        <div className=\"content\">\n          <h1>Title: {data.title}</h1>\n          <h3>Excerpt: {data.excerpt}</h3>\n          <p className=\"content-text\">Content: {data.content}</p>\n          <h3>By Author: {data.author.Name} on {new Date(data.date).toLocaleDateString()}</h3>\n          <button onClick={()=>handleDelete(data._id)}className=\"content-text\">Delete This Post</button>\n        </div>\n      </div>\n    </div>\n                ))\n       )\n    :(<h1>No Post Available</h1>)}\n        </div>\n      <br />      <br />\n<button className='g' onClick={()=>navigate('/api/v1/users/home')}>Home</button>\n        </>\n    )\n   \n}\nexport {Mypost}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}